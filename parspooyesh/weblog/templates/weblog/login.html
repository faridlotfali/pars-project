<!-- {% extends 'weblog/base.html' %} -->

<!-- {% block head_title %}Login || {{ block.super }}{% endblock head_title %} -->

<!-- {% block content %} -->
  <h2>Log in to My Site</h2>
  <div>
      <form class="form-horizontal" id="login_form" name="LoginForm" action="/login/" method="post">
      {% csrf_token %}
      {% if next %}
          <input type="hidden" name="next" value="{{ next }}" />
      {% endif %}
      <div class="control-group">
          <label class="control-label" for="username">Username</label>
          <div class="controls">
              <input type="text" id="username" name="username"  placeholder="Username">
          </div>
      </div>
      <div class="control-group">
          <label class="control-label" for="password">Password</label>
          <div class="controls">
              <input type="password" name="password" id="password" placeholder="Password">
          </div>
      </div>
      <div class="control-group mt-2">
          <div class="controls">
              <button type="submit" class="btn btn-primary">Login</button>
          </div>
      </div>
      </form>
  </div>

  <script>
      $("#username").change(function () {
        console.log( $(this).val() );
      });
      $(document).on('submit','#login_form', function(e){
        e.preventDefault();
        
        $.ajax({
          type:'POST',
          url : '/login/',
          data:{
            username:$('#username').val(),
            password:$('#password').val(),
            csrfmiddlewaretoken: $('input[name = csrfmiddlewaretoken ]').val(),
          },
          sucess: function(){

          }
        });

      });
    </script>
    <script src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
<!-- {% endblock %} -->
